<!--pages/engineer/index.wxml-->
<view class="container">
  <!-- 今日工作安排 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">今日工作安排</text>
      <text class="section-count">{{todayOrders.length}}个工单</text>
    </view>
    <view class="order-list">
      <view class="order-item" 
            wx:for="{{todayOrders}}" 
            wx:key="id">
        <view class="order-main" bindtap="onOrderTap" data-id="{{item.id}}">
          <view class="order-left">
            <text class="order-no">{{item.orderNo}}</text>
            <text class="appoint-time">预约：{{item.appointTime}}</text>
          </view>
          <text class="status {{item.status}}">{{item.statusText}}</text>
        </view>
        <view class="order-info">
          <view class="info-row">
            <text class="label">客户：</text>
            <text>{{item.customer}}</text>
          </view>
          <view class="info-row">
            <text class="label">设备：</text>
            <text>{{item.equipment}}</text>
          </view>
          <view class="info-row">
            <text class="label">故障：</text>
            <text>{{item.issue}}</text>
          </view>
          <view class="info-row">
            <text class="label">地点：</text>
            <text>{{item.location}}</text>
          </view>
        </view>
        <view class="order-actions">
          <button class="action-btn" 
                  bindtap="startOrder" 
                  data-id="{{item.id}}"
                  wx:if="{{item.status === 'pending'}}">
            开始处理
          </button>
          <button class="action-btn" 
                  bindtap="makeCall" 
                  data-phone="{{item.phone}}">
            联系客户
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- 待办工单 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">待办工单</text>
      <text class="section-count">{{pendingOrders.length}}个工单</text>
    </view>
    <view class="order-list">
      <view class="order-item" 
            wx:for="{{pendingOrders}}" 
            wx:key="id">
        <view class="order-main" bindtap="onOrderTap" data-id="{{item.id}}">
          <text class="order-no">{{item.orderNo}}</text>
          <text class="status {{item.status}}">{{item.statusText}}</text>
        </view>
        <view class="order-info">
          <view class="info-row">
            <text class="label">客户：</text>
            <text>{{item.customer}}</text>
          </view>
          <view class="info-row">
            <text class="label">设备：</text>
            <text>{{item.equipment}}</text>
          </view>
          <view class="info-row">
            <text class="label">故障：</text>
            <text>{{item.issue}}</text>
          </view>
          <view class="info-row">
            <text class="label">地点：</text>
            <text>{{item.location}}</text>
          </view>
        </view>
        <view class="order-actions">
          <button class="action-btn" 
                  bindtap="startOrder" 
                  data-id="{{item.id}}">
            开始处理
          </button>
          <button class="action-btn" 
                  bindtap="makeCall" 
                  data-phone="{{item.phone}}">
            联系客户
          </button>
        </view>
      </view>
    </view>
  </view>
</view>