<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-box">
      <icon type="search" size="16" color="#999"/>
      <input 
        class="search-input"
        placeholder="æœç´¢å®¢æˆ·/è®¢å•" 
        value="{{keyword}}"
        bindinput="onSearchInput"
        bindconfirm="onSearch"
      />
    </view>
  </view>

  <!-- å·¥ä½œç»Ÿè®¡ -->
  <view class="stats-card">
    <view class="stats-item">
      <text class="stats-num">{{stats.todayCount}}</text>
      <text class="stats-label">ä»Šæ—¥å·¥å•</text>
    </view>
    <view class="stats-item">
      <text class="stats-num">{{stats.weekCount}}</text>
      <text class="stats-label">æœ¬å‘¨å·¥å•</text>
    </view>
    <view class="stats-item">
      <text class="stats-num">{{stats.monthCount}}</text>
      <text class="stats-label">æœ¬æœˆå·¥å•</text>
    </view>
  </view>

  <!-- ä»Šæ—¥å·¥å• -->
  <view class="section today-section">
    <view class="section-header">
      <view class="header-left">
        <text class="section-icon">ğŸ“‹</text>
        <text class="section-title">ä»Šæ—¥å·¥å•</text>
      </view>
      <text class="section-count">2ä¸ªå·¥å•</text>
    </view>
    <view class="order-list">
      <view class="order-item" wx:for="{{todayOrders}}" wx:key="id">
        <view class="order-main">
          <view class="order-left">
            <text class="order-no">{{item.orderNo}}</text>
            <text class="order-time">é¢„çº¦ï¼š{{item.appointTime}}</text>
          </view>
          <text class="tag {{item.status === 'pending' ? 'tag-warning' : 'tag-primary'}}">
            {{item.statusText}}
          </text>
        </view>
        <view class="order-info">
          <view class="info-row">
            <text class="label">å®¢æˆ·ï¼š</text>
            <text>{{item.customer}}</text>
          </view>
          <view class="info-row">
            <text class="label">è®¾å¤‡ï¼š</text>
            <text>{{item.equipment}}</text>
          </view>
          <view class="info-row">
            <text class="label">æ•…éšœï¼š</text>
            <text>{{item.issue}}</text>
          </view>
          <view class="info-row">
            <text class="label">åœ°ç‚¹ï¼š</text>
            <view class="location-wrap">
              <text>{{item.location}}</text>
              <view class="copy-btn" catchtap="copyLocation" data-location="{{item.location}}">
                å¤åˆ¶
              </view>
            </view>
          </view>
        </view>
        <view class="order-actions">
          <button class="btn btn-outline" bindtap="makeCall" data-phone="{{item.phone}}">
            è”ç³»å®¢æˆ·
          </button>
          <button class="btn btn-primary" bindtap="startOrder" data-id="{{item.id}}" wx:if="{{item.status === 'pending'}}">
            å¼€å§‹å¤„ç†
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- å¯æŠ¢å·¥å• -->
  <view class="section grab-section">
    <view class="section-header">
      <view class="header-left">
        <text class="section-icon">ğŸ””</text>
        <text class="section-title">å¯æŠ¢å·¥å•</text>
      </view>
      <text class="section-count">3ä¸ªå·¥å•</text>
    </view>
    <view class="order-list">
      <view class="order-item" wx:for="{{grabOrders}}" wx:key="id">
        <view class="order-main">
          <view class="order-left">
            <text class="order-no">{{item.orderNo}}</text>
            <text class="order-time">{{item.createTime}}</text>
          </view>
          <text class="tag tag-warning">å¾…æŠ¢å•</text>
        </view>
        <view class="order-info">
          <view class="info-row">
            <text class="label">å®¢æˆ·ï¼š</text>
            <text>{{item.customer}}</text>
          </view>
          <view class="info-row">
            <text class="label">è®¾å¤‡ï¼š</text>
            <text>{{item.equipment}}</text>
          </view>
          <view class="info-row">
            <text class="label">æ•…éšœï¼š</text>
            <text>{{item.issue}}</text>
          </view>
          <view class="info-row">
            <text class="label">åœ°ç‚¹ï¼š</text>
            <view class="location-wrap">
              <text>{{item.location}}</text>
              <text class="distance">{{item.distance}}km</text>
            </view>
          </view>
        </view>
        <view class="order-actions">
          <button class="btn btn-primary" bindtap="grabOrder" data-id="{{item.id}}">
            æŠ¢å•
          </button>
        </view>
      </view>
    </view>
  </view>
</view> 